import{$ as M,A as t,Aa as $,B as d,Ba as U,Ca as z,Da as H,Ea as J,F as _,J as n,K as b,L as F,Q as p,W as k,X as O,Y as E,fa as I,ha as x,ka as N,la as u,ma as P,na as T,pa as A,qa as j,ra as L,s as a,sa as q,ta as w,u as s,ua as R,v as y,va as G,w as f,x as l,xa as B,ya as V,z as r,za as D}from"./chunk-RR3K2GFD.js";var C=c=>({"is-invalid":c});function Q(c,e){if(c&1&&(r(0,"option",22),n(1),t()),c&2){let i=e.$implicit;l("value",i),a(),b(i)}}function W(c,e){if(c&1&&(r(0,"option",22),n(1),t()),c&2){let i=e.$implicit;l("value",i),a(),b(i)}}function X(c,e){if(c&1&&(r(0,"option",22),n(1),t()),c&2){let i=e.$implicit;l("value",i),a(),b(i)}}function Y(c,e){if(c&1&&(r(0,"option",22),n(1),t()),c&2){let i=e.$implicit;l("value",i),a(),b(i)}}var K=class c{constructor(e,i,o,m,g,h,v){this.fb=e;this.characterStoreService=i;this.rickAndMortyService=o;this.router=m;this.route=g;this.location=h;this.toastService=v;this.characterForm=this.fb.group({name:["",u.required],species:["",u.required],status:["",u.required],gender:["",u.required],type:["",u.required],origin:[""],location:[""],image:[""]})}characterForm;editing=!1;characterId=null;statusList=Object.values(V);genderList=Object.values(D);speciesList=Object.values($);typesList=Object.values(U);ngOnInit(){if(this.characterId=this.route.snapshot.paramMap.get("id"),this.characterId){this.editing=!0;let e=this.characterStoreService.getCharacterById(this.characterId);e?this.patchForm(e):this.rickAndMortyService.getCharacterById(this.characterId).subscribe({next:i=>{this.patchForm(i)},error:i=>{console.error("Error searching for character in API:",i),this.toastService.show("Error searching for character","danger")}})}}patchForm(e){this.characterForm.patchValue({name:e.name,species:e.species,status:e.status,gender:e.gender,type:e.type,origin:e.origin?.name||"",location:e.location?.name||"",image:e.image})}onSubmit(){if(this.characterForm.invalid){this.characterForm.markAllAsTouched(),this.toastService.show("Fill in all required fields.","warning");return}let e=this.characterForm.value,i={id:this.characterId??Math.random().toString(36).substring(2,9),name:e.name,species:e.species,status:e.status,gender:e.gender,type:e.type,origin:{name:e.origin},location:{name:e.location},image:e.image||"/default-character.jpeg",episode:[],edited:!0};this.editing?(this.characterStoreService.updateCharacter(i),this.toastService.show("Character updated successfully!","success")):(this.characterStoreService.addCharacterAtTop(i),this.toastService.show("Character created successfully!","success")),this.router.navigate(["/"])}onCancel(){this.router.navigate(["/"])}onBack(){this.location.back()}static \u0275fac=function(i){return new(i||c)(s(G),s(J),s(H),s(x),s(I),s(k),s(z))};static \u0275cmp=y({type:c,selectors:[["app-character-form"]],decls:61,vars:22,consts:[[1,"container","mt-4"],["type","button",1,"btn-back",3,"click"],[1,"bi","bi-arrow-left"],[1,"mb-4","mt-3"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"form-label"],["formControlName","name","placeholder","Name",1,"form-control","bg-dark","text-light","border-0","rounded-3",3,"ngClass"],[1,"invalid-feedback"],[1,"row"],[1,"col-md-6","mb-3"],["formControlName","species",1,"form-select","bg-dark","text-light","border-0","rounded-3",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["formControlName","gender",1,"form-select","bg-dark","text-light","border-0","rounded-3",3,"ngClass"],["formControlName","status",1,"form-select","bg-dark","text-light","border-0","rounded-3",3,"ngClass"],["formControlName","type",1,"form-select","bg-dark","text-light","border-0","rounded-3",3,"ngClass"],["formControlName","origin","placeholder","Status",1,"form-control","bg-dark","text-light","border-0","rounded-3"],["formControlName","location","placeholder","Status",1,"form-control","bg-dark","text-light","border-0","rounded-3"],["formControlName","image","placeholder","Url da imagem",1,"form-control","bg-dark","text-light","border-0","rounded-3"],[1,"d-flex","gap-2","justify-content-end","mt-4"],["type","button",1,"btn","btn-custom",3,"click"],["type","submit",1,"btn","btn-custom-action"],[3,"value"]],template:function(i,o){if(i&1&&(r(0,"div",0)(1,"button",1),_("click",function(){return o.onBack()}),d(2,"i",2),r(3,"span"),n(4,"Back"),t()(),r(5,"h2",3),n(6),t(),r(7,"form",4),_("ngSubmit",function(){return o.onSubmit()}),r(8,"div",5)(9,"label",6),n(10,"Name"),t(),d(11,"input",7),r(12,"div",8),n(13," Name is required. "),t()(),r(14,"div",9)(15,"div",10)(16,"label",6),n(17,"Species"),t(),r(18,"select",11),f(19,Q,2,2,"option",12),t(),r(20,"div",8),n(21," Species is required. "),t()(),r(22,"div",10)(23,"label",6),n(24,"Gender"),t(),r(25,"select",13),f(26,W,2,2,"option",12),t(),r(27,"div",8),n(28," Gender is required. "),t()()(),r(29,"div",9)(30,"div",10)(31,"label",6),n(32,"Status"),t(),r(33,"select",14),f(34,X,2,2,"option",12),t(),r(35,"div",8),n(36," Status is required. "),t()(),r(37,"div",10)(38,"label",6),n(39,"Type"),t(),r(40,"select",15),f(41,Y,2,2,"option",12),t(),r(42,"div",8),n(43," Type is required. "),t()()(),r(44,"div",5)(45,"label",6),n(46,"Origin"),t(),d(47,"input",16),t(),r(48,"div",5)(49,"label",6),n(50,"Location"),t(),d(51,"input",17),t(),r(52,"div",5)(53,"label",6),n(54,"Image URL"),t(),d(55,"input",18),t(),r(56,"div",19)(57,"button",20),_("click",function(){return o.onCancel()}),n(58,"Cancel"),t(),r(59,"button",21),n(60),t()()()()),i&2){let m,g,h,v,S;a(6),F("",o.editing?"Edit":"Create"," character"),a(),l("formGroup",o.characterForm),a(4),l("ngClass",p(12,C,((m=o.characterForm.get("name"))==null?null:m.invalid)&&((m=o.characterForm.get("name"))==null?null:m.touched))),a(7),l("ngClass",p(14,C,((g=o.characterForm.get("species"))==null?null:g.invalid)&&((g=o.characterForm.get("species"))==null?null:g.touched))),a(),l("ngForOf",o.speciesList),a(6),l("ngClass",p(16,C,((h=o.characterForm.get("gender"))==null?null:h.invalid)&&((h=o.characterForm.get("gender"))==null?null:h.touched))),a(),l("ngForOf",o.genderList),a(7),l("ngClass",p(18,C,((v=o.characterForm.get("status"))==null?null:v.invalid)&&((v=o.characterForm.get("status"))==null?null:v.touched))),a(),l("ngForOf",o.statusList),a(6),l("ngClass",p(20,C,((S=o.characterForm.get("type"))==null?null:S.invalid)&&((S=o.characterForm.get("type"))==null?null:S.touched))),a(),l("ngForOf",o.typesList),a(19),F(" ",o.editing?"Save Changes":"Create Character"," ")}},dependencies:[M,O,E,B,A,w,R,N,q,P,T,j,L],styles:[".btn-custom[_ngcontent-%COMP%], .btn-custom-action[_ngcontent-%COMP%]{background-color:#19262b;color:#c5c6c7;border-radius:50px;padding:.5rem 1.5rem;font-weight:600;transition:all .3s ease;cursor:pointer;border:none}.btn-custom[_ngcontent-%COMP%]:hover, .btn-custom-action[_ngcontent-%COMP%]:hover, .btn-custom.active[_ngcontent-%COMP%], .active.btn-custom-action[_ngcontent-%COMP%]{background-color:#283c45;color:#11ccab}.btn-custom[_ngcontent-%COMP%]:focus, .btn-custom-action[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #1abc9c80}.btn-custom-action[_ngcontent-%COMP%]{background-color:#4d3fa6;color:#c5c6c7}.btn-custom-action[_ngcontent-%COMP%]:hover{background-color:#3c3181;color:#c5c6c7}.btn-back[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:.5rem;background:none;border:none;color:#11ccab;font-weight:500;font-size:1rem;cursor:pointer;padding:0;text-decoration:none;transition:transform .2s ease,color .3s ease}.btn-back[_ngcontent-%COMP%]:hover{transform:translate(-2px)}.btn-back[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .btn-back[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block}"]})};export{K as CharacterFormComponent};
